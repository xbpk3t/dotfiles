---
version: '3'

tasks:
  default:
    desc: swaks SMTP test
    summary: "task -g swaks TO=you@example.com SERVER=smtp.example.com [FROM=me@example.com] [SUBJECT=Test] [BODY=Hello]"
    platforms: [linux, darwin]
    requires:
      vars: [TO, SERVER]
    vars:
      FROM: '{{.FROM | default "me@example.com"}}'
      SUBJECT: '{{.SUBJECT | default "Test"}}'
      BODY: '{{.BODY | default "Hello"}}'
    preconditions:
      - sh: command -v swaks
        msg: swaks not found
    cmds:
      - "swaks --to {{.TO}} --server {{.SERVER}} --from {{.FROM}} --header \"Subject: {{.SUBJECT}}\" --body \"{{.BODY}}\""
