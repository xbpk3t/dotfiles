---
version: '3'

tasks:
  pmtu:quick:
    desc: PMTU quick playbook (tracepath + DF ping)
    summary: "task -g nz:pmtu:quick HOST=1.1.1.1 [SIZE=1472] [COUNT=3]"
    requires:
      vars: [HOST]
    vars:
      # SIZE 是 payload，1472 = 1500 - 20(IPv4) - 8(ICMP)
      SIZE: '{{.SIZE | default "1472"}}'
      COUNT: '{{.COUNT | default "3"}}'
    cmds:
      - task: nc:pmtu
        vars:
          HOST: '{{.HOST}}'
          SIZE: '{{.SIZE}}'
          COUNT: '{{.COUNT}}'
