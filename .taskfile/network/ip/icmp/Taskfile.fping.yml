---
version: '3'

tasks:
  default:
    desc: fping (multi-host ping)
    summary: "task -g default HOSTS=<hosts> [COUNT=5]"
    platforms: [linux]
    requires:
      vars: [HOSTS]
    vars:
      COUNT: '{{.COUNT | default "5"}}'
      HOSTS: ''
    preconditions:
      - sh: command -v fping
        msg: fping not found
    cmds:
      # -c: count, -q: quiet summary
      - fping -c {{.COUNT}} {{.HOSTS}}

  sweep:
    desc: fping sweep CIDR
    summary: "task -g sweep CIDR=<cidr>"
    vars:
      CIDR: ''
    platforms: [linux]
    requires:
      vars: [CIDR]
    preconditions:
      - sh: command -v fping
        msg: fping not found
    cmds:
      # -a: alive, -g: generate, -q: quiet
      - fping -a -g {{.CIDR}}
