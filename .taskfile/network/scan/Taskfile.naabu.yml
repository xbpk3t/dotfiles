---
version: '3'

tasks:
  default:
    desc: naabu port scan
    summary: "task -g naabu HOSTS=example.com [PORTS=1-65535] [RATE=1000]"
    platforms: [linux, darwin]
    requires:
      vars: [HOSTS]
    vars:
      PORTS: '{{.PORTS | default "1-65535"}}'
      # RATE 为每秒发送包数（packets per second）
      RATE: '{{.RATE | default "1000"}}'
    preconditions:
      - sh: command -v naabu
        msg: naabu not found
    cmds:
      - naabu -host {{.HOSTS}} -p {{.PORTS}} -rate {{.RATE}}

  list:
    desc: naabu list network interfaces
    summary: "task -g naabu:list"
    platforms: [linux, darwin]
    preconditions:
      - sh: command -v naabu
        msg: naabu not found
    cmds:
      - naabu -iflist
