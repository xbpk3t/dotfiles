---
# https://github.com/garybowers/iventoy_docker
# https://hub.docker.com/r/szabis/iventoy
# https://github.com/garybowers/iventoy_docker
# iVentoy（包括这个Docker镜像）在装机时确实需要通过LAN（有线网）来工作，因为它是一个基于PXE的网络启动工具，主要依赖局域网内的DHCP和TFTP服务来引导客户端从服务器上获取ISO镜像并启动安装。
# 为什么必须插网线？
#
# PXE引导机制：iVentoy服务器（运行在Docker中）和目标机器（装机机）必须在同一个局域网（LAN）内。目标机通过网络卡（NIC）从iVentoy服务器请求引导文件和ISO数据。如果没有网线连接，目标机就无法接入LAN，也就无法PXE启动。
# 没有WiFi支持：PXE标准主要针对有线网络（Ethernet），无线WiFi在BIOS/UEFI的PXE模式下支持有限或不稳定，尤其在装机初期（还没安装驱动）。如果你用WiFi适配器，它可能需要额外的驱动，但iVentoy的ISO挂载和数据传输仍需稳定的LAN连接。
# ISO传输：你把ISO存到iVentoy服务器上，目标机通过网络“挂载”它作为虚拟光驱。如果断网（无网线），传输就会失败。
# 简单来说，因为在装机时，还没有wifi，所以必须要插着网线走LAN，才能从另一台机器上拿到这个iventoy上存着的iso。



version: '3.9'
services:
  iventoy:
    image: ziggyds/iventoy:latest # Or another suitable iVentoy image like garybowers/iventoy:latest
    container_name: iventoy
    restart: always
    privileged: true # iVentoy requires privileged mode for network operations
    ports:
      - 26000:26000 # Web UI
      - 16000:16000 # HTTP server port (can be changed in iVentoy settings)
      - 10809:10809 # iVentoy internal service
      - 67:67/udp   # DHCP (if iVentoy is managing DHCP)
      - 69:69/udp   # TFTP
    volumes:
      - ./iso:/app/iso # Mount a local 'iso' folder to store your ISO files
      - ./data:/app/data # Mount a local 'data' folder for iVentoy configuration
      - ./log:/app/log # Mount a local 'log' folder for iVentoy logs (optional)
    environment:
      - AUTO_START_PXE=true # Automatically starts the PXE service on container startup
