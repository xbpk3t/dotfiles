# DRAG AND CLICK SETTINGS
# ================================================
# 降低拖拽阈值，让文本选择更容易触发
binds {
    drag_threshold = 5  # 降低到 5px，更容易触发拖拽
}

# WINDOWS AND BORDERS
# ================================================
general {
  layout = dwindle

  # Cursor
  no_focus_fallback = true

  # Gaps
  gaps_in = 5
  gaps_out = 5

  # Borders
  border_size = 0
  col.active_border = 0x00000000
  col.inactive_border = 0x00000000

  # Resize
  resize_on_border = false
  hover_icon_on_border = false

  # Allow tearing (you must add a window rule to the window to allow tearing)
  allow_tearing = false
}

cursor {
  inactive_timeout = 900  # Hide the cursor after n ms (also works on screenlock)
  no_warps = false        # Never move the cursor automatically
}

ecosystem {
  no_donation_nag = true
  no_update_news = true
}

misc {
  # Allow windows to steal focus - (only xorg apps currently)
  focus_on_activate = false

  # Enable if you use personalized wallpapers
  disable_hyprland_logo = true
}

# VISUAL EFFECTS
# ================================================

# See: https://wiki.hyprland.org/Configuring/Variables
decoration {

    # Round borders
    rounding = 8

    # Shadow
    shadow {
      enabled = true
      range = 4
      render_power = 3
      color = rgba(1a1a1aee)
    }

    active_opacity=1.0
    inactive_opacity=0.9
    fullscreen_opacity=1.0

    blur {
        enabled=true
        new_optimizations = true
        size=3                	# minimum 1
        passes=1                # minimum 1, more passes = more resource intensive.
        ignore_opacity=false
    }
}

# See: https://wiki.hyprland.org/Configuring/Animations
animations {
    enabled   = yes

    # BEZIERS    NAME        X0    Y0   X1   Y1
    bezier    =  myBezier,   0.05, 0.9, 0.1, 1.05

    # ANIMATION  NAME              ON    SPEED  CURVE      STYLE
    animation =  windows,          1,    2,     myBezier
    animation =  windowsOut,       1,    2,     default,   popin 80%
    animation =  border,           1,    5,     default
    animation =  fadeIn,           1,    2,     default
    animation =  fadeOut,          1,    2,     default
    animation =  workspaces,       1,    6,     default,   fade
    animation =  specialWorkspace, 1,    3,     myBezier,  slide
}


# LAYOUT DETAILS
# ================================================

# See: https://wiki.hyprland.org/Configuring/Dwindle-Layout/
dwindle {
    pseudotile     = yes
    preserve_split = yes
}

# See: https://wiki.hyprland.org/Configuring/Master-Layout
master {
  new_on_top = true
}

# See: https://wiki.hyprland.org/Configuring/Variables
# Gestures configuration - 优化以减少与文本选择的冲突
# 改为 4 指手势用于工作区切换，避免与 3 指文本选择冲突
gestures {
  workspace_swipe_distance = 300
  workspace_swipe_touch = false
  workspace_swipe_invert = true
  workspace_swipe_touch_invert = false
  workspace_swipe_min_speed_to_force = 30
  workspace_swipe_cancel_ratio = 0.5
  workspace_swipe_create_new = true
  workspace_swipe_direction_lock = true
  workspace_swipe_direction_lock_threshold = 10
  workspace_swipe_forever = false
  workspace_swipe_use_r = false
}

#-- Input ----------------------------------------------------
# Configure mouse and touchpad here.
input {
    kb_layout=us
    kb_variant=
    kb_model=
    kb_options=
    kb_rules=

    # mouse focus will not switch to the hovered window unless the mouse crosses a window boundary
    follow_mouse=1
    mouse_refocus=false

    natural_scroll=0
    touchpad {
        natural_scroll = 1
        # 关键设置：启用点击行为模式，这样可以用手指数量而不是位置来区分点击
        clickfinger_behavior = true
        disable_while_typing = true
        # 轻触触摸板点击功能 - 对于物理按压触控板仍然重要
        tap-to-click = true
        tap-and-drag = true
        # 重要：启用拖拽锁定，这样松开手指后拖拽不会立即停止
        drag_lock = 2  # 2 = sticky mode，最适合文本选择
        # 中键点击模拟 - 保持启用，可能有用
        middle_button_emulation = true
        # 三指拖拽功能 - 启用三指拖拽，用于文本选择
        drag_3fg = 1
        # 点击映射设置 - 在 clickfinger_behavior 下工作方式不同
        tap_button_map = "lmr"
    }
	force_no_accel=0
    # repeat_rate=
    # repeat_delay=
    numlock_by_default=1
}

# Monitors
# ===================================================
monitor = , preferred, auto, 1
